---
title: Nushell 0.94.0
author: The Nu Authors
author_site: https://twitter.com/nu_shell
author_image: https://www.nushell.sh/blog/images/nu_logo.png
excerpt: Today, we're releasing version 0.94.0 of Nu. This release adds case-preserving environment, changes to path handling, raw string literals, and improvements to streaming!
---

# Nushell 0.94.0

Nushell, or Nu for short, is a new shell that takes a modern, structured approach to your command line. It works seamlessly with the data from your filesystem, operating system, and a growing number of file formats to make it easy to build powerful command line pipelines.

Today, we're releasing version 0.94.0 of Nu. This release adds case-preserving environment, changes to path handling, raw string literals, and improvements to streaming!

# Where to get it

Nu 0.94.0 is available as [pre-built binaries](https://github.com/nushell/nushell/releases/tag/0.94.0) or from [crates.io](https://crates.io/crates/nu). If you have Rust installed you can install it using `cargo install nu`.

As part of this release, we also publish a set of optional plugins you can install and use with Nu. To install, use `cargo install nu_plugin_<plugin name>`.

# Table of content
- [*Themes of this release / New features*](#themes-of-this-release-new-features-toc)
    - [*Fixing path and CWD handling*](#fixing-path-and-cwd-handling-toc)
    - [*Case-preserving environment*](#case-preserving-environment-toc)
    - [*Streaming all the things*](#streaming-all-the-things-toc)
    - [*New language feature: raw strings*](#new-language-feature-raw-strings-toc)
    - [*Removal of deprecated features*](#removal-of-deprecated-features-toc)
    - [*Shell integration config*](#shell-integration-config-toc)
    - [*Hall of fame*](#hall-of-fame-toc)
        - [*Bug fixes*](#bug-fixes-toc)
        - [*Enhancing the documentation*](#enhancing-the-documentation-toc)
    - [*Our set of commands is evolving*](#our-set-of-commands-is-evolving-toc)
        - [*New commands*](#new-commands-toc)
          - [*`sys` subcommands*](#sys-subcommands-toc)
          - [*`ps` support on BSD systems*](#ps-support-on-bsd-systems-toc)
          - [*`debug profile --lines`*](#debug-profile-lines-toc)
        - [*Changes to existing commands*](#changes-to-existing-commands-toc)
          - [*Making range semantics consistent*](#making-range-semantics-consistent-toc)
          - [*`scope commands`*](#scope-commands-toc)
          - [*`which`*](#which-toc)
          - [*`describe`*](#describe-toc)
          - [*Streaming more commands*](#streaming-more-commands-toc)
          - [*`cd` and `pwd`*](#cd-and-pwd-toc)
          - [*`collect`*](#collect-toc)
          - [*`complete`*](#complete-toc)
          - [*`each`*](#each-toc)
          - [*`ls`*](#ls-toc)
          - [*`bytes build`*](#bytes-build-toc)
          - [*`from nuon` and `to nuon`*](#from-nuon-and-to-nuon-toc)
          - [*`save`*](#save-toc)
          - [*`hide-env`*](#hide-env-toc)
          - [*CWD fixes*](#cwd-fixes-toc)
          - [*`nu-highlight`*](#nu-highlight-toc)
          - [*`into sqlite`*](#into-sqlite-toc)
          - [*`stor insert`*](#stor-insert-toc)
          - [*`decode base64` and `encode base64`*](#decode-base64-and-encode-base64-toc)
          - [*`char`*](#char-toc)
        - [*Deprecated commands*](#deprecated-commands-toc)
          - [*`sys`*](#sys-toc)
          - [*`str contains --not`*](#str-contains-not-toc)
        - [*Removed commands*](#removed-commands-toc)
          - [*`lazy make`*](#lazy-make-toc)
          - [*`describe --collect-lazyrecords`*](#describe-collect-lazyrecords-toc)
          - [*List of environment variables support in `with-env`*](#list-of-environment-variables-support-in-with-env-toc)
- [*Breaking changes*](#breaking-changes-toc)
- [*Full changelog*](#full-changelog-toc)

# Themes of this release / New features [[toc](#table-of-content)]

## Fixing path and CWD handling [[toc](#table-of-content)]

One of our contributors, [@YizhePKU](https://github.com/YizhePKU), has started an effort to refactor how Nushell internally handles the current working directory and paths in general. Namely, Nushell aggressively canonicalizes paths instead of using logical paths which can lead to unintuitive or annoying behavior ([#2175](https://github.com/nushell/nushell/issues/2175)). Thanks to their work, `$env.CWD` and the `pwd` command now support logical paths. With time, we intend to make similar to changes to other commands to make them more intuitive and consistent with the rest of Nushell. Another goal with these changes is to eliminate bugs in commands, as some commands incorrectly use the Nushell process's current working directory instead of `$env.CWD`. So far, the `grid`, `path type`, and `touch --reference` commands have been fixed, and we are aiming to bring more fixes in the next release. We kindly ask for your patience as we rework this part of Nushell, and we would appreciate if you would report any issues you encounter!

## Case-preserving environment [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

In an effort to allow more ergonomic cross-platform scripting, we have changed the environment in Nushell to be case-preserving ([#12701](https://github.com/nushell/nushell/pull/12701)). That is, environment variables keep their initial casing but can be accessed in a case-insensitive manner within Nushell. This means that accessing `$env.PATH` or `$env.Path` will now work on both unix-based systems and Windows systems. To get environment variables in a case-sensitive manner, you can use `get -s`.
```nushell
$env | get -s PATH
```
Please note that there are still a few things that have to be ironed out with this new behavior. For example, it is currently unclear what `load-env { FOO: BAR, foo: bar }` should do. So, there may be more changes in the near future.

## Streaming all the things [[toc](#table-of-content)]

Another major effort with this release was to make streaming more consistent and widespread ([#12774](https://github.com/nushell/nushell/pull/12774), [#12897](https://github.com/nushell/nushell/pull/12897), [#12918](https://github.com/nushell/nushell/pull/12918), and more). For example, Nushell now passes operating system pipe descriptors directly to external commands, meaning there should be an improvement to throughput for some pipelines. Additionally, several commands were reworked so that they are now able to stream their output in more cases instead of having to collect it all in memory beforehand. The commands in question include `from csv`, `to csv`, `from tsv`, `to tsv`, `from json --objects`, `take`, `skip`, `first`, `last`, `bytes ends-with`, `bytes collect`, `str join`, `into string`, and `into binary`. Of course, the plan is to add more commands to this list in the future, so this is only the beginning!

## New language feature: raw strings [[toc](#table-of-content)]

This release adds a new type of string literal to the language: raw strings ([#9956](https://github.com/nushell/nushell/pull/9956)). These are just like single quoted strings, except that raw strings may also contain single quotes. This is possible, since raw strings are enclosed by a starting `r#'` and an ending `'#`. This syntax should look familiar to users of Rust.
```nushell
r#'some text'# == 'some text' # true

r#'contains 'quoted' text'# == "contains 'quoted' text"
```
Additional `#` symbols can be added to the start and end of the raw string to enclose one less than the same number of `#` symbols next to a `'` symbol in the string.
```nushell
r###'this text has multiple '## symbols'###
```

## Removal of deprecated features [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

Last release, we deprecated the dataframe commands and feature in favor of the new polars plugin. See the [previous release notes](https://www.nushell.sh/blog/2024-04-30-nushell_0_93_0.html#introduction-of-the-polars-plugin-toc) for more information and migration steps. In this release, the dataframe commands have been removed as planned alongside the `dataframes` cargo feature. Similarly, this release removes lazy records from the language following their deprecation. This includes the removal of the `lazy make` command and the `--collect-lazyrecords` flag on `describe`. One consequence of this change is that the `sys` command will now return a regular record and will take a minimum of 400ms to complete (to sample CPU usage). As such, the `sys` command has been deprecated, and new subcommands have been added in its place (`sys mem`, `sys cpu`, `sys host`, `sys disks`, `sys net`, `sys temp`, and `sys users`).

## Shell integration config [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

With this release, we have changed the `shell_integration` setting in the config to be a record of multiple settings ([#12629](https://github.com/nushell/nushell/pull/12629)):

```nushell
shell_integration: {
  # osc2 abbreviates the path if in the home_dir, sets the tab/window title, shows the running command in the tab/window title
  osc2: true
  # osc7 is a way to communicate the path to the terminal, this is helpful for spawning new tabs in the same directory
  osc7: true
  # osc8 is also implemented as the deprecated setting ls.show_clickable_links, it shows clickable links in ls output if your terminal supports it
  osc8: true
  # osc9_9 is from ConEmu and is starting to get wider support. It's similar to osc7 in that it communicates the path to the terminal
  osc9_9: false
  # osc133 is several escapes invented by Final Term which include the supported ones below.
  # 133;A - Mark prompt start
  # 133;B - Mark prompt end
  # 133;C - Mark pre-execution
  # 133;D;exit - Mark execution finished with exit code
  # This is used to enable terminals to know where the prompt is, the command is, where the command finishes, and where the output of the command is
  osc133: true
  # osc633 is closely related to osc133 but only exists in visual studio code (vscode) and supports their shell integration features
  # 633;A - Mark prompt start
  # 633;B - Mark prompt end
  # 633;C - Mark pre-execution
  # 633;D;exit - Mark execution finished with exit code
  # 633;E - NOT IMPLEMENTED - Explicitly set the command line with an optional nonce
  # 633;P;Cwd=<path> - Mark the current working directory and communicate it to the terminal
  # and also helps with the run recent menu in vscode
  osc633: true
  # reset_application_mode is escape \x1b[?1l and was added to help ssh work better
  reset_application_mode: true
}
```

This change provides greater granularity, allowing you to disable certain integrations that may cause issues in certain terminals.

## Hall of fame [[toc](#table-of-content)]

### Bug fixes [[toc](#table-of-content)]

Thanks to all the contributors below for helping us solve issues and bugs :pray:

| author                                           | title                                                                          | url                                                     |
| ------------------------------------------------ | ------------------------------------------------------------------------------ | ------------------------------------------------------- |
| [@IanManske](https://github.com/IanManske)       | Fix panic when redirecting nothing                                             | [#12970](https://github.com/nushell/nushell/pull/12970) |
| [@YizhePKU](https://github.com/YizhePKU)         | Fix `touch --reference` using PWD from the environment                         | [#12976](https://github.com/nushell/nushell/pull/12976) |
| [@YizhePKU](https://github.com/YizhePKU)         | Fix `path type` using PWD from the environment                                 | [#12975](https://github.com/nushell/nushell/pull/12975) |
| [@IanManske](https://github.com/IanManske)       | Clear environment for child `Command`s                                         | [#12901](https://github.com/nushell/nushell/pull/12901) |
| [@IanManske](https://github.com/IanManske)       | Preserve metadata in more places                                               | [#12848](https://github.com/nushell/nushell/pull/12848) |
| [@WindSoilder](https://github.com/WindSoilder)   | allow define it as a variable inside closure                                   | [#12888](https://github.com/nushell/nushell/pull/12888) |
| [@IanManske](https://github.com/IanManske)       | Replace `ExternalStream` with new `ByteStream` type                            | [#12774](https://github.com/nushell/nushell/pull/12774) |
| [@WindSoilder](https://github.com/WindSoilder)   | allow passing float value to custom command                                    | [#12879](https://github.com/nushell/nushell/pull/12879) |
| [@IanManske](https://github.com/IanManske)       | Fix `sys` panic                                                                | [#12846](https://github.com/nushell/nushell/pull/12846) |
| [@IanManske](https://github.com/IanManske)       | Fix `char` panic                                                               | [#12867](https://github.com/nushell/nushell/pull/12867) |
| [@ExaltedBagel](https://github.com/ExaltedBagel) | Fix panic when exploring empty dictionary                                      | [#12860](https://github.com/nushell/nushell/pull/12860) |
| [@ExaltedBagel](https://github.com/ExaltedBagel) | Fix improperly escaped strings in stor insert                                  | [#12820](https://github.com/nushell/nushell/pull/12820) |
| [@IanManske](https://github.com/IanManske)       | Fix custom converters with `save`                                              | [#12833](https://github.com/nushell/nushell/pull/12833) |
| [@IanManske](https://github.com/IanManske)       | Fix pipe redirection into `complete`                                           | [#12818](https://github.com/nushell/nushell/pull/12818) |
| [@IanManske](https://github.com/IanManske)       | Fix syntax highlighting for `not`                                              | [#12815](https://github.com/nushell/nushell/pull/12815) |
| [@IanManske](https://github.com/IanManske)       | Fix list spread syntax highlighting                                            | [#12793](https://github.com/nushell/nushell/pull/12793) |
| [@WindSoilder](https://github.com/WindSoilder)   | allow raw string to be used inside subexpression, list, and closure            | [#12776](https://github.com/nushell/nushell/pull/12776) |
| [@WindSoilder](https://github.com/WindSoilder)   | Allow ls works inside dir with [] brackets                                     | [#12625](https://github.com/nushell/nushell/pull/12625) |
| [@ExaltedBagel](https://github.com/ExaltedBagel) | Enable columns with spaces for into_sqlite by adding quotes to column names    | [#12759](https://github.com/nushell/nushell/pull/12759) |
| [@WindSoilder](https://github.com/WindSoilder)   | allow raw string to be used inside subexpression, list, and closure            | [#12776](https://github.com/nushell/nushell/pull/12776) |
| [@IanManske](https://github.com/IanManske)       | Bump `base64` to 0.22.1                                                        | [#12757](https://github.com/nushell/nushell/pull/12757) |
| [@devyn](https://github.com/devyn)               | Fix trailing slash in PWD set by `cd`                                          | [#12760](https://github.com/nushell/nushell/pull/12760) |
| [@lavafroth](https://github.com/lavafroth)       | fix: prevent relative directory traversal from crashing                        | [#12438](https://github.com/nushell/nushell/pull/12438) |
| [@merelymyself](https://github.com/merelymyself) | Prevent `each` from swallowing errors when `eval_block` returns a `ListStream` | [#12412](https://github.com/nushell/nushell/pull/12412) |

### Enhancing the documentation [[toc](#table-of-content)]

Thanks to all the contributors below for helping us making the documentation of Nushell commands better :pray:
| author                                           | title                                                          | url                                                     |
| ------------------------------------------------ | -------------------------------------------------------------- | ------------------------------------------------------- |
| [@NotTheDr01ds](https://github.com/NotTheDr01ds) | Fixed small error in the help-examples for the get command     | [#12877](https://github.com/nushell/nushell/pull/12877) |
| [@NotTheDr01ds](https://github.com/NotTheDr01ds) | Fixed a nitpick usage-help error - closure v. block            | [#12876](https://github.com/nushell/nushell/pull/12876) |
| [@fdncred](https://github.com/fdncred)           | make it clearer what is being loaded with --log-level info     | [#12875](https://github.com/nushell/nushell/pull/12875) |
| [@WindSoilder](https://github.com/WindSoilder)   | make better messages for incomplete string                     | [#12868](https://github.com/nushell/nushell/pull/12868) |
| [@NotTheDr01ds](https://github.com/NotTheDr01ds) | Search terms for compact command                               | [#12864](https://github.com/nushell/nushell/pull/12864) |
| [@NotTheDr01ds](https://github.com/NotTheDr01ds) | Add example and search term for 'repeat' to the `fill` command | [#12844](https://github.com/nushell/nushell/pull/12844) |
| [@devyn](https://github.com/devyn)               | Make the message when running a plugin exe directly clearer    | [#12806](https://github.com/nushell/nushell/pull/12806) |
| [@amtoine](https://github.com/amtoine)           | improve NUON documentation                                     | [#12717](https://github.com/nushell/nushell/pull/12717) |
| [@sholderbach](https://github.com/sholderbach)   | Update PLATFORM_SUPPORT regarding feature flags                | [#12741](https://github.com/nushell/nushell/pull/12741) |

## Our set of commands is evolving [[toc](#table-of-content)]

### New commands [[toc](#table-of-content)]

#### `sys` subcommands [[toc](#table-of-content)]

This release adds new `sys` subcommands corresponding to each column of the record returned by `sys` ([#12747](https://github.com/nushell/nushell/pull/12747)):

- `sys host`
- `sys cpu`
- `sys mem`
- `sys net`
- `sys disks`
- `sys temp`
- `sys users` (new!)

The output of these commands should be the same as before as the corresponding `sys` column except for a few differences:

- `sys host` does not have a `sessions` column. This table has been moved to the new `sys users` command ([#12787](https://github.com/nushell/nushell/pull/12787)). (The old `sys` command still has the `sessions` column.)
- The `boot_time` column in `sys host` and `sys | get host` is now a date value instead of a formatted string ([#12846](https://github.com/nushell/nushell/pull/12846)).

#### `ps` support on BSD systems [[toc](#table-of-content)]

In [#12892](https://github.com/nushell/nushell/pull/12892), [@devyn](https://github.com/devyn) has added support for the `ps` commands on FreeBSD, NetBSD, and OpenBSD!

#### `debug profile --lines` [[toc](#table-of-content)]

The `debug profile` command now has a `--lines` flag with [#12930](https://github.com/nushell/nushell/pull/12930). Providing this will flag will add a `file` and `line` column to the output of `debug profile`.

### Changes to existing commands [[toc](#table-of-content)]

#### Making range semantics consistent [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

Ranges are inclusive in the upper bound by default in Nushell (e.g., `1..2` or `1..=2` gives `[1, 2]`). However, some commands treated the upperbound as exclusive. With [#12894](https://github.com/nushell/nushell/pull/12894) this has been fixed for the following commands:
- `str substring`
- `str index-of`
- `detect columns`

To specify an exclusive upperbound, use the `..<` form for ranges (e.g., `1..<2`).

#### `scope commands` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

After [#12832](https://github.com/nushell/nushell/pull/12832), several columns from the output of `scope commands` have been removed:

- `is_builtin`
- `is_plugin`
- `is_custom`
- `is_keyword`
- `is_extern`

All of these columns are mutually exclusive (or one column always implies another), so these columns have instead been replaced with a single `type` column. It will contain one of the following string values:

- `built-in`
- `plugin`
- `custom`
- `keyword`
- `external`
- `alias`

#### `which` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

Related to the changes for `scope commands`, the `type` column reported by `which` can now be:

- `plugin` or `keyword` instead of `built-in`
- `external` instead of `custom` for declared `extern` commands

#### `describe` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

With the `--detailed` flag, the `stdout`, `stderr`, and `exit_code` columns have been removed for external streams / byte streams. Instead, the `origin` column now reports `unknown`, `file`, or `external` for byte streams, and the `type` column will be `byte stream`, `string (stream)`, or `binary (stream)`.

#### Streaming more commands [[toc](#table-of-content)]

This release changes a bunch of commands to stream where possible ([#12897](https://github.com/nushell/nushell/pull/12897)):

- `first` and `last` now support byte stream input and will return the first or last specified number of bytes (without collecting the whole stream into memory at once).
- `take` and `skip` also now support byte streams input and will return new byte streams.
- `str join` will now stream string output if it is given a stream of string values.
- `bytes collect` can also stream its output now.
- `bytes ends-with` now supports byte streams and does not need to collect the entire stream output in memory at once ([#12887](https://github.com/nushell/nushell/pull/12887)).
- `from json --objects` now streams its output if its input is a stream ([#12949](https://github.com/nushell/nushell/pull/12949)).
- `into binary` and `into string` will now apply a type hint to byte streams and will simply return the input stream without consuming or draining it.

#### `cd` and `pwd` [[toc](#table-of-content)]

Thanks to [@YizhePKU](https://github.com/YizhePKU) in [#12603](https://github.com/nushell/nushell/pull/12603), the `cd` command now sets the `CWD` to a logical path by default. Instead, there is now a `--physical` flag for `cd` which will canonicalize the path before setting it as the `CWD`. Similarly, `pwd` now has a `--physical` flag to resolve symlinks before reporting the current working directory.

#### `collect` [[toc](#table-of-content)]

After [#12788](https://github.com/nushell/nushell/pull/12788), the closure parameter for `collect` is now optional. If no closure is provided, the collected pipeline input is simply returned as a value.

#### `complete` [[toc](#table-of-content)]

Previously, if an external command was terminated by a signal, the exit code returned from `complete` would be `-1`. Also, if the external command core dumped, then an error value would be present in the `exit_code` column. Now with [#12774](https://github.com/nushell/nushell/pull/12774), if an external command was terminated by a signal (this includes core dumps), then the `exit_code` column will contain the negation of the signal number (to differentiate it from a regular exit code).

Also, the `o+e>|` combined pipe redirection now works properly with `complete`. That is, the stdout and stderr of the preceding external command are merged prior to be passed to `complete`, and the combined output will be present in the `stdout` column of the record returned by `complete` ([#12818](https://github.com/nushell/nushell/pull/12818)).

#### `each` [[toc](#table-of-content)]

Thanks to [@merelymyself](https://github.com/merelymyself), the `each` command now bubbles up errors in certain cases where it would previously ignore them ([#12412](https://github.com/nushell/nushell/pull/12412)).

#### `ls` [[toc](#table-of-content)]

In a similar change, the `ls` command will now return errors instead empty entries if it fails to list a path ([#12033](https://github.com/nushell/nushell/pull/12033)). Additionally, `ls` has received a bug fix with [#12625](https://github.com/nushell/nushell/pull/12625) so that it works in a directory with `[` or `]` in its path.

#### `bytes build` [[toc](#table-of-content)]

With [#12685](https://github.com/nushell/nushell/pull/12685), the `bytes build` command now accepts integers as rest arguments (each integer number is treated as a byte).

#### `from nuon` and `to nuon` [[toc](#table-of-content)]

The nuon commands can now serialize and deserialize cell path values after [#12718](https://github.com/nushell/nushell/pull/12718).

#### `save` [[toc](#table-of-content)]

With [#12833](https://github.com/nushell/nushell/pull/12833), custom converters now work again for the `save` command. E.g., `save output.custom` now uses the `to custom` command if it exists (note that this is currently not done for singular string value inputs).

#### `hide-env` [[toc](#table-of-content)]

A long-standing bug with `hide-env` is that it would not hide environment variables from external commands / child processes in certain cases. With [#12901](https://github.com/nushell/nushell/pull/12901), this issue has finally been fixed.

#### CWD fixes [[toc](#table-of-content)]

Some commands are incorrectly using the current working directory of the shell process, instead of the internal `$env.CWD` tracked in the engine state. This release fixes a few of these commands:

- `path type` ([#12975](https://github.com/nushell/nushell/pull/12975))
- `touch --reference` ([#12976](https://github.com/nushell/nushell/pull/12976))
- `grid` ([#12947](https://github.com/nushell/nushell/pull/12947))

#### `nu-highlight` [[toc](#table-of-content)]

`nu-highlight` has received two bug fixes. Namely, highlight `not` has been fixed ([#12815](https://github.com/nushell/nushell/pull/12815)) and extra output when highlighting list spreads has been fixed ([#12793](https://github.com/nushell/nushell/pull/12793)).

#### `into sqlite` [[toc](#table-of-content)]

Columns with spaces are now supported by `into sqlite`, since it will wrap the columns with backticks ([#12759](https://github.com/nushell/nushell/pull/12759)).

#### `stor insert` [[toc](#table-of-content)]

Thanks to [@ExaltedBagel](https://github.com/ExaltedBagel) in [#12820](https://github.com/nushell/nushell/pull/12820), `stor insert` now escapes single quotes.

#### `decode base64` and `encode base64` [[toc](#table-of-content)]

The alphabet used for `--character-set binhex` has been corrected in [#12757](https://github.com/nushell/nushell/pull/12757).

#### `char` [[toc](#table-of-content)]

In [#12867](https://github.com/nushell/nushell/pull/12867), an issue with `char` was fixed where it can panic if a list is spread after the `--integer` or `--unicode` flags.

### Deprecated commands [[toc](#table-of-content)]

#### `sys` [[toc](#table-of-content)]

With the removal of lazy records, the `sys` command will now return a regular record. This means it has to compute all of its columns before returning. Since the `sys` command samples CPU usage over a 400ms period, then this would be unideal if the only information you needed from the command was, e.g., the host information. Because of this, the command has been deprecated in favor of the new `sys` subcommands as listed in [new commands](#new-commands-toc).

#### `str contains --not` [[toc](#table-of-content)]

This release deprecates the `--not` flag for `str contains`, since none of the other string commands have a similar flag ([#12837](https://github.com/nushell/nushell/pull/12837)). Instead of the `--not` flag, you can use the `not` operator in one of the following ways:

```nushell
# using parentheses
not ("foobar" | str contains foo)

# using a pipe with the `$in` variable
"foobar" | str contains foo | not $in
```

### Removed commands [[toc](#table-of-content)]

#### `lazy make` [[toc](#table-of-content)]

The `lazy make` command has been removed in [#12682](https://github.com/nushell/nushell/pull/12682). See [removal of deprecated features](#removal-of-deprecated-features-toc) for more information.

#### `describe --collect-lazyrecords` [[toc](#table-of-content)]

The `--collect-lazyrecords` flag has been removed from `describe`, since lazy records have been remove from the language ([#12682](https://github.com/nushell/nushell/pull/12682)).

#### List of environment variables support in `with-env` [[toc](#table-of-content)]

This release removes support for the list of environment variable form of `with-env` that was [deprecated](http://localhost:8080/blog/2024-04-30-nushell_0_93_0.html#with-env-toc) in the previous release. Going forward, only the record form is supported.

# Breaking changes [[toc](#table-of-content)]

- [#12939](https://github.com/nushell/nushell/pull/12939) Remove list support in `with-env`
- [#12894](https://github.com/nushell/nushell/pull/12894) fix range semantic in detect_columns, str substring, str index-of
- [#12930](https://github.com/nushell/nushell/pull/12930) Small improvements to `debug profile`
- [#12889](https://github.com/nushell/nushell/pull/12889) Remove dataframes crate and feature
- [#12897](https://github.com/nushell/nushell/pull/12897) Add string/binary type color to `ByteStream`
- [#12832](https://github.com/nushell/nushell/pull/12832) Use `CommandType` in more places
- [#12774](https://github.com/nushell/nushell/pull/12774) Replace `ExternalStream` with new `ByteStream` type
- [#12846](https://github.com/nushell/nushell/pull/12846) Fix `sys` panic
- [#12837](https://github.com/nushell/nushell/pull/12837) remove --not flag for 'str contains'
- [#12747](https://github.com/nushell/nushell/pull/12747) Add `sys` subcommands
- [#12669](https://github.com/nushell/nushell/pull/12669) Polars lazy refactor
- [#12524](https://github.com/nushell/nushell/pull/12524) `ListStream` touchup
- [#12682](https://github.com/nushell/nushell/pull/12682) Remove lazy records
- [#12629](https://github.com/nushell/nushell/pull/12629) overhaul shell_integration to enable individual control over ansi escape sequences

# Full changelog [[toc](#table-of-content)]

- [IanManske](https://github.com/IanManske) created
    - [Fix panic when redirecting nothing](https://github.com/nushell/nushell/pull/12970)
    - [Do not propagate glob creation error for external args](https://github.com/nushell/nushell/pull/12955)
    - [Allow byte streams with unknown type to be compatible with binary](https://github.com/nushell/nushell/pull/12959)
    - [Revert "Polars lazy refactor (#12669)"](https://github.com/nushell/nushell/pull/12962)
    - [Use `cwd` in `grid`](https://github.com/nushell/nushell/pull/12947)
    - [Remove list support in `with-env`](https://github.com/nushell/nushell/pull/12939)
    - [Remove dataframes crate and feature](https://github.com/nushell/nushell/pull/12889)
    - [Take owned `Read` and `Write`](https://github.com/nushell/nushell/pull/12909)
    - [Make `get_full_help` take `&dyn Command`](https://github.com/nushell/nushell/pull/12903)
    - [Clear environment for child `Command`s](https://github.com/nushell/nushell/pull/12901)
    - [Use `CommandType` in more places](https://github.com/nushell/nushell/pull/12832)
    - [Preserve metadata in more places](https://github.com/nushell/nushell/pull/12848)
    - [Support `ByteStream`s in `bytes starts-with` and `bytes ends-with`](https://github.com/nushell/nushell/pull/12887)
    - [Add `Span` merging functions](https://github.com/nushell/nushell/pull/12511)
    - [`Bytestream` touchup](https://github.com/nushell/nushell/pull/12886)
    - [Replace `ExternalStream` with new `ByteStream` type](https://github.com/nushell/nushell/pull/12774)
    - [Remove stack debug assert](https://github.com/nushell/nushell/pull/12861)
    - [Remove usages of `Call::positional_nth`](https://github.com/nushell/nushell/pull/12871)
    - [Fix `sys` panic](https://github.com/nushell/nushell/pull/12846)
    - [Fix `char` panic](https://github.com/nushell/nushell/pull/12867)
    - [Update PR template](https://github.com/nushell/nushell/pull/12838)
    - [Fix custom converters with `save`](https://github.com/nushell/nushell/pull/12833)
    - [Fix pipe redirection into `complete`](https://github.com/nushell/nushell/pull/12818)
    - [Fix raw strings as external argument](https://github.com/nushell/nushell/pull/12817)
    - [Refactor the CLI code a bit](https://github.com/nushell/nushell/pull/12782)
    - [Fix syntax highlighting for `not`](https://github.com/nushell/nushell/pull/12815)
    - [Pass `Stack` ref to `Completer::fetch`](https://github.com/nushell/nushell/pull/12783)
    - [Refactor message printing in `rm`](https://github.com/nushell/nushell/pull/12799)
    - [Fix/simplify cwd in benchmarks](https://github.com/nushell/nushell/pull/12812)
    - [Refactor `parse` command](https://github.com/nushell/nushell/pull/12791)
    - [Add `sys users` command](https://github.com/nushell/nushell/pull/12787)
    - [Fix list spread syntax highlighting](https://github.com/nushell/nushell/pull/12793)
    - [`describe` refactor](https://github.com/nushell/nushell/pull/12770)
    - [Add `sys` subcommands](https://github.com/nushell/nushell/pull/12747)
    - [`ListStream` touchup](https://github.com/nushell/nushell/pull/12524)
    - [Refactor flattening to reduce intermediate allocations](https://github.com/nushell/nushell/pull/12756)
    - [Bump `base64` to 0.22.1](https://github.com/nushell/nushell/pull/12757)
    - [Fix typo](https://github.com/nushell/nushell/pull/12752)
    - [Remove some macros](https://github.com/nushell/nushell/pull/12742)
    - [Remove lazy records](https://github.com/nushell/nushell/pull/12682)
- [YizhePKU](https://github.com/YizhePKU) created
    - [Fix `touch --reference` using PWD from the environment](https://github.com/nushell/nushell/pull/12976)
    - [Fix `path type` using PWD from the environment](https://github.com/nushell/nushell/pull/12975)
    - [Fixes `.` expanded incorrectly as external argument](https://github.com/nushell/nushell/pull/12950)
    - [Rewrite run_external.rs](https://github.com/nushell/nushell/pull/12921)
    - [Remove `std::env::set_current_dir()` call from `EngineState::merge_env()`](https://github.com/nushell/nushell/pull/12922)
    - [Implement PWD recovery](https://github.com/nushell/nushell/pull/12779)
    - [Migrate to a new PWD API (part 2)](https://github.com/nushell/nushell/pull/12749)
    - [Fix PWD cannot point to root paths](https://github.com/nushell/nushell/pull/12761)
    - [Migrate to a new PWD API](https://github.com/nushell/nushell/pull/12603)
    - [Path expansion no longer removes trailing slashes](https://github.com/nushell/nushell/pull/12662)
    - [Change environment variables to be case-preserving](https://github.com/nushell/nushell/pull/12701)
- [fdncred](https://github.com/fdncred) created
    - [make polars plugin use mimalloc](https://github.com/nushell/nushell/pull/12967)
    - [Revert "Remove `std::env::set_current_dir()` call from `EngineState::merge_env()`"](https://github.com/nushell/nushell/pull/12954)
    - [add `math min` and `math max` to `bench` command](https://github.com/nushell/nushell/pull/12913)
    - [sync up with reedline changes](https://github.com/nushell/nushell/pull/12881)
    - [make it clearer what is being loaded with --log-level info](https://github.com/nushell/nushell/pull/12875)
    - [cleanup osc calls for shell_integration](https://github.com/nushell/nushell/pull/12810)
    - [overhaul shell_integration to enable individual control over ansi escape sequences](https://github.com/nushell/nushell/pull/12629)
    - [add raw-string literal support](https://github.com/nushell/nushell/pull/9956)
    - [change wix install method from perMachine to perUser](https://github.com/nushell/nushell/pull/12720)
- [devyn](https://github.com/devyn) created
    - [Make `from json --objects` streaming](https://github.com/nushell/nushell/pull/12949)
    - [Implement streaming I/O for CSV and TSV commands](https://github.com/nushell/nushell/pull/12918)
    - [Add support for the `ps` command on FreeBSD, NetBSD, and OpenBSD](https://github.com/nushell/nushell/pull/12892)
    - [Update mimalloc to 0.1.42](https://github.com/nushell/nushell/pull/12919)
    - [Add string/binary type color to `ByteStream`](https://github.com/nushell/nushell/pull/12897)
    - [`collect`: don't require a closure](https://github.com/nushell/nushell/pull/12788)
    - [Exclude polars from ensure_plugins_built(), for performance reasons](https://github.com/nushell/nushell/pull/12896)
    - [Fix the way the output of `table` is printed in `print()`](https://github.com/nushell/nushell/pull/12895)
    - [Make the message when running a plugin exe directly clearer](https://github.com/nushell/nushell/pull/12806)
    - [Fix trailing slash in PWD set by `cd`](https://github.com/nushell/nushell/pull/12760)
    - [Upgrade to interprocess 2.0.0](https://github.com/nushell/nushell/pull/12729)
    - [Flush on every plugin `Data` message](https://github.com/nushell/nushell/pull/12728)
    - [Add `toolkit release-pkg windows` for Windows release pkg builds](https://github.com/nushell/nushell/pull/12727)
    - [Make `bytes build` accept integer values as individual bytes](https://github.com/nushell/nushell/pull/12685)
    - [Bump version to `0.93.1`](https://github.com/nushell/nushell/pull/12710)
    - [Fix Windows Terminal profile installation](https://github.com/nushell/nushell/pull/12714)
    - [Bump version to `0.93.0`](https://github.com/nushell/nushell/pull/12709)
    - [Bump `reedline` to `0.32.0`](https://github.com/nushell/nushell/pull/12708)
- [rgwood](https://github.com/rgwood) created
    - [`explore` refactoring+clarification](https://github.com/nushell/nushell/pull/12940)
    - [`explore` cleanup: remove+move binary viewer config](https://github.com/nushell/nushell/pull/12920)
    - [`explore`: consolidate padding config, handle ByteStream, tweak naming+comments](https://github.com/nushell/nushell/pull/12915)
    - [Remove accidentally committed file](https://github.com/nushell/nushell/pull/12734)
    - [`explore`: adopt `anyhow`, support `CustomValue`, remove help system](https://github.com/nushell/nushell/pull/12692)
- [WindSoilder](https://github.com/WindSoilder) created
    - [fix std help](https://github.com/nushell/nushell/pull/12943)
    - [add some completion tests](https://github.com/nushell/nushell/pull/12908)
    - [fix range semantic in detect_columns, str substring, str index-of](https://github.com/nushell/nushell/pull/12894)
    - [allow define it as a variable inside closure](https://github.com/nushell/nushell/pull/12888)
    - [allow passing float value to custom command](https://github.com/nushell/nushell/pull/12879)
    - [make better messages for incomplete string](https://github.com/nushell/nushell/pull/12868)
    - [allow raw string to be used inside subexpression, list, and closure](https://github.com/nushell/nushell/pull/12776)
    - [Allow ls works inside dir with [] brackets](https://github.com/nushell/nushell/pull/12625)
- [kubouch](https://github.com/kubouch) created
    - [Fix leftover wrong column name](https://github.com/nushell/nushell/pull/12937)
    - [Small improvements to `debug profile`](https://github.com/nushell/nushell/pull/12930)
- [app/dependabot](https://github.com/app/dependabot) created
    - [Bump shadow-rs from 0.27.1 to 0.28.0](https://github.com/nushell/nushell/pull/12932)
    - [Bump actions/checkout from 4.1.5 to 4.1.6](https://github.com/nushell/nushell/pull/12934)
    - [Bump rust-embed from 8.3.0 to 8.4.0](https://github.com/nushell/nushell/pull/12870)
    - [Bump interprocess from 2.0.1 to 2.1.0](https://github.com/nushell/nushell/pull/12869)
    - [Bump softprops/action-gh-release from 2.0.4 to 2.0.5](https://github.com/nushell/nushell/pull/12803)
    - [Bump actions/checkout from 4.1.4 to 4.1.5](https://github.com/nushell/nushell/pull/12804)
    - [Bump rmp-serde from 1.2.0 to 1.3.0](https://github.com/nushell/nushell/pull/12711)
    - [Bump actions/checkout from 4.1.3 to 4.1.4](https://github.com/nushell/nushell/pull/12712)
    - [Bump crate-ci/typos from 1.20.10 to 1.21.0](https://github.com/nushell/nushell/pull/12713)
- [NotTheDr01ds](https://github.com/NotTheDr01ds) created
    - [Add completer for std help](https://github.com/nushell/nushell/pull/12929)
    - [Fixed small error in the help-examples for the get command](https://github.com/nushell/nushell/pull/12877)
    - [Fixed a nitpick usage-help error - closure v. block](https://github.com/nushell/nushell/pull/12876)
    - [Search terms for compact command](https://github.com/nushell/nushell/pull/12864)
    - [Add example and search term for 'repeat' to the `fill` command](https://github.com/nushell/nushell/pull/12844)
- [sholderbach](https://github.com/sholderbach) created
    - [Remove unused dependencies](https://github.com/nushell/nushell/pull/12917)
    - [Shrink `Value` by boxing `Range`/`Closure`](https://github.com/nushell/nushell/pull/12784)
    - [Add SOPs for dealing with adding deps/crates](https://github.com/nushell/nushell/pull/12771)
    - [Update `interprocess` to 2.0.1](https://github.com/nushell/nushell/pull/12769)
    - [Specify the required minimum `chrono` version](https://github.com/nushell/nushell/pull/12766)
    - [Pin `base64` to the fixed patch version](https://github.com/nushell/nushell/pull/12762)
    - [Avoid taking unnecessary ownership of intermediates](https://github.com/nushell/nushell/pull/12740)
    - [Update PLATFORM_SUPPORT regarding feature flags](https://github.com/nushell/nushell/pull/12741)
    - [Eliminate dead code in `nu-explore`](https://github.com/nushell/nushell/pull/12735)
    - [Fix clippy::wrong_self_convention in polars plugin](https://github.com/nushell/nushell/pull/12737)
    - [Rework for new clippy lints](https://github.com/nushell/nushell/pull/12736)
    - [Update the bundled readme in release archives](https://github.com/nushell/nushell/pull/12688)
- [ayax79](https://github.com/ayax79) created
    - [fixed syntax shape requirements for --quantiles option for polars summary](https://github.com/nushell/nushell/pull/12878)
    - [Allow custom value operations to work on eager and lazy dataframes interchangeably. ](https://github.com/nushell/nushell/pull/12819)
    - [Polars lazy refactor](https://github.com/nushell/nushell/pull/12669)
- [cablehead](https://github.com/cablehead) created
    - [Add a passing test for interactivity on slow pipelines](https://github.com/nushell/nushell/pull/12865)
    - [feat: add an echo command to nu_plugin_example](https://github.com/nushell/nushell/pull/12754)
- [ExaltedBagel](https://github.com/ExaltedBagel) created
    - [Fix panic when exploring empty dictionary](https://github.com/nushell/nushell/pull/12860)
    - [Fix improperly escaped strings in stor insert](https://github.com/nushell/nushell/pull/12820)
    - [Enable columns with spaces for into_sqlite by adding quotes to column names](https://github.com/nushell/nushell/pull/12759)
- [cptpiepmatz](https://github.com/cptpiepmatz) created
    - [Add Stack::stdout_file and Stack::stderr_file to capture stdout/-err of external commands](https://github.com/nushell/nushell/pull/12857)
- [francesco-gaglione](https://github.com/francesco-gaglione) created
    - [Merged tests to produce a single binary](https://github.com/nushell/nushell/pull/12826)
- [Skyppex](https://github.com/Skyppex) created
    - [remove --not flag for 'str contains'](https://github.com/nushell/nushell/pull/12837)
- [FilipAndersson245](https://github.com/FilipAndersson245) created
    - [Tango migration](https://github.com/nushell/nushell/pull/12469)
- [amtoine](https://github.com/amtoine) created
    - [improve NUON documentation](https://github.com/nushell/nushell/pull/12717)
    - [add support for cell-paths to NUON](https://github.com/nushell/nushell/pull/12718)
- [szepeviktor](https://github.com/szepeviktor) created
    - [Minimize future false positive typos](https://github.com/nushell/nushell/pull/12751)
- [lavafroth](https://github.com/lavafroth) created
    - [fix: prevent relative directory traversal from crashing](https://github.com/nushell/nushell/pull/12438)
- [maxim-uvarov](https://github.com/maxim-uvarov) created
    - [add more tests to the `polars` plugin](https://github.com/nushell/nushell/pull/12719)
- [rtpg](https://github.com/rtpg) created
    - [Report errors that occur on file operations in ls](https://github.com/nushell/nushell/pull/12033)
- [hustcer](https://github.com/hustcer) created
    - [Upgrade Nu to v0.93.0 for nightly and release workflow](https://github.com/nushell/nushell/pull/12721)
- [merelymyself](https://github.com/merelymyself) created
    - [Prevent `each` from swallowing errors when `eval_block` returns a `ListStream`](https://github.com/nushell/nushell/pull/12412)
